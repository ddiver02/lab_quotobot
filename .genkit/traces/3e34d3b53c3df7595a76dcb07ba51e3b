{"traceId":"3e34d3b53c3df7595a76dcb07ba51e3b","spans":{"3b45c3940adb98c7":{"spanId":"3b45c3940adb98c7","traceId":"3e34d3b53c3df7595a76dcb07ba51e3b","parentSpanId":"a337510552751b15","startTime":1755766756300,"endTime":1755766768071.5715,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"model","genkit:name":"googleai/gemini-2.5-flash","genkit:path":"/{quoteMatchFlow,t:flow}/{generate,t:util}/{googleai/gemini-2.5-flash,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"너는 인용구를 이용한 감정 큐레이터다.\\n아래 인용구 목록(0..N-1) 중에서 입력 문장에 가장 잘 어울리는 하나를 고른다.\\n반드시 JSON으로만 응답하고, keys는 input, chosenIndex, reason 이다.\\nchosenIndex는 정수이며 인용구 배열의 인덱스여야 한다.\\n--- 인용구 목록 ---\\n0. [찰스 디킨스 / 두 도시 이야기] 그것은 최고의 시대였고, 그것은 최악의 시대였다. (tags: 밝음, 양가감정, 희망, 덧없음)\\n1. [레오 톨스토이 / 안나 카레니나] 행복한 가정은 모두 비슷하지만, 불행한 가정은 저마다 다르다. (tags: 평온, 행복, 가정, 안정, 성찰)\\n2. [F. 스콧 피츠제럴드 / 위대한 개츠비] 우리는 계속 앞으로 나아간다, 거대한 강물의 흐름을 거슬러, 끝내는 과거로 떠밀려가면서. (tags: 향수, 체념, 피로, 월요일, 시간)\\n3. [어니스트 헤밍웨이 / 노인과 바다] 인간은 패배하도록 만들어지지 않았다. 인간은 파괴될 수는 있어도, 패배하지는 않는다. (tags: 투지, 의지, 도전, 역경, 끈기)\\n4. [가브리엘 가르시아 마르케스 / 백년 동안의 고독] 많은 해 뒤에, 총살 부대 앞에 서서, 아우렐리아노 부엔디아 대령은 아버지에게 얼음을 보여주었던 저 먼 오후를 떠올리게 될 것이다. (tags: 향수, 기억, 따스함, 쓸쓸함)\\n--- 입력 문장 ---\\n어제가 그리워\\n--- 출력 형식(JSON) ---\\n{ \\\"input\\\": \\\"<원문 그대로>\\\", \\\"chosenIndex\\\": <number>, \\\"reason\\\": \\\"<간단한 이유>\\\" }\"}]}],\"config\":{},\"tools\":[],\"output\":{}}","genkit:output":"{\"candidates\":[{\"index\":0,\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"```json\\n{\\n  \\\"input\\\": \\\"어제가 그리워\\\",\\n  \\\"chosenIndex\\\": 4,\\n  \\\"reason\\\": \\\"입력 문장은 지난 시간에 대한 직접적인 그리움과 향수를 표현합니다. 4번 인용구는 멀리 떨어진 과거의 순간을 '떠올리게 될 것'이라는 서술을 통해 '기억'과 '향수'의 감정을 명확히 드러내며, 이는 '어제가 그리워'라는 감정과 가장 잘 연결됩니다.\\\"\\n}\\n```\"}]},\"finishReason\":\"stop\",\"custom\":{}}],\"custom\":{\"candidates\":[{\"content\":{\"parts\":[{\"text\":\"```json\\n{\\n  \\\"input\\\": \\\"어제가 그리워\\\",\\n  \\\"chosenIndex\\\": 4,\\n  \\\"reason\\\": \\\"입력 문장은 지난 시간에 대한 직접적인 그리움과 향수를 표현합니다. 4번 인용구는 멀리 떨어진 과거의 순간을 '떠올리게 될 것'이라는 서술을 통해 '기억'과 '향수'의 감정을 명확히 드러내며, 이는 '어제가 그리워'라는 감정과 가장 잘 연결됩니다.\\\"\\n}\\n```\"}],\"role\":\"model\"},\"finishReason\":\"STOP\",\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":445,\"candidatesTokenCount\":113,\"totalTokenCount\":2477,\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":445}],\"thoughtsTokenCount\":1919},\"modelVersion\":\"gemini-2.5-flash\",\"responseId\":\"8N-maKC7ArS3qtsPpZVk\"},\"usage\":{\"inputCharacters\":785,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":210,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":445,\"outputTokens\":113,\"thoughtsTokens\":1919,\"totalTokens\":2477},\"latencyMs\":11770.806250000001}","genkit:state":"success"},"displayName":"googleai/gemini-2.5-flash","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"a337510552751b15":{"spanId":"a337510552751b15","traceId":"3e34d3b53c3df7595a76dcb07ba51e3b","parentSpanId":"4a30f322ae943e26","startTime":1755766756267,"endTime":1755766768129.1533,"attributes":{"genkit:type":"util","genkit:name":"generate","genkit:path":"/{quoteMatchFlow,t:flow}/{generate,t:util}","genkit:input":"{\"model\":\"googleai/gemini-2.5-flash\",\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"너는 인용구를 이용한 감정 큐레이터다.\\n아래 인용구 목록(0..N-1) 중에서 입력 문장에 가장 잘 어울리는 하나를 고른다.\\n반드시 JSON으로만 응답하고, keys는 input, chosenIndex, reason 이다.\\nchosenIndex는 정수이며 인용구 배열의 인덱스여야 한다.\\n--- 인용구 목록 ---\\n0. [찰스 디킨스 / 두 도시 이야기] 그것은 최고의 시대였고, 그것은 최악의 시대였다. (tags: 밝음, 양가감정, 희망, 덧없음)\\n1. [레오 톨스토이 / 안나 카레니나] 행복한 가정은 모두 비슷하지만, 불행한 가정은 저마다 다르다. (tags: 평온, 행복, 가정, 안정, 성찰)\\n2. [F. 스콧 피츠제럴드 / 위대한 개츠비] 우리는 계속 앞으로 나아간다, 거대한 강물의 흐름을 거슬러, 끝내는 과거로 떠밀려가면서. (tags: 향수, 체념, 피로, 월요일, 시간)\\n3. [어니스트 헤밍웨이 / 노인과 바다] 인간은 패배하도록 만들어지지 않았다. 인간은 파괴될 수는 있어도, 패배하지는 않는다. (tags: 투지, 의지, 도전, 역경, 끈기)\\n4. [가브리엘 가르시아 마르케스 / 백년 동안의 고독] 많은 해 뒤에, 총살 부대 앞에 서서, 아우렐리아노 부엔디아 대령은 아버지에게 얼음을 보여주었던 저 먼 오후를 떠올리게 될 것이다. (tags: 향수, 기억, 따스함, 쓸쓸함)\\n--- 입력 문장 ---\\n어제가 그리워\\n--- 출력 형식(JSON) ---\\n{ \\\"input\\\": \\\"<원문 그대로>\\\", \\\"chosenIndex\\\": <number>, \\\"reason\\\": \\\"<간단한 이유>\\\" }\"}]}],\"config\":{}}","genkit:output":"{\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"```json\\n{\\n  \\\"input\\\": \\\"어제가 그리워\\\",\\n  \\\"chosenIndex\\\": 4,\\n  \\\"reason\\\": \\\"입력 문장은 지난 시간에 대한 직접적인 그리움과 향수를 표현합니다. 4번 인용구는 멀리 떨어진 과거의 순간을 '떠올리게 될 것'이라는 서술을 통해 '기억'과 '향수'의 감정을 명확히 드러내며, 이는 '어제가 그리워'라는 감정과 가장 잘 연결됩니다.\\\"\\n}\\n```\"}]},\"finishReason\":\"stop\",\"usage\":{\"inputCharacters\":785,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":210,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":445,\"outputTokens\":113,\"thoughtsTokens\":1919,\"totalTokens\":2477},\"custom\":{\"candidates\":[{\"content\":{\"parts\":[{\"text\":\"```json\\n{\\n  \\\"input\\\": \\\"어제가 그리워\\\",\\n  \\\"chosenIndex\\\": 4,\\n  \\\"reason\\\": \\\"입력 문장은 지난 시간에 대한 직접적인 그리움과 향수를 표현합니다. 4번 인용구는 멀리 떨어진 과거의 순간을 '떠올리게 될 것'이라는 서술을 통해 '기억'과 '향수'의 감정을 명확히 드러내며, 이는 '어제가 그리워'라는 감정과 가장 잘 연결됩니다.\\\"\\n}\\n```\"}],\"role\":\"model\"},\"finishReason\":\"STOP\",\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":445,\"candidatesTokenCount\":113,\"totalTokenCount\":2477,\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":445}],\"thoughtsTokenCount\":1919},\"modelVersion\":\"gemini-2.5-flash\",\"responseId\":\"8N-maKC7ArS3qtsPpZVk\"},\"request\":{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"너는 인용구를 이용한 감정 큐레이터다.\\n아래 인용구 목록(0..N-1) 중에서 입력 문장에 가장 잘 어울리는 하나를 고른다.\\n반드시 JSON으로만 응답하고, keys는 input, chosenIndex, reason 이다.\\nchosenIndex는 정수이며 인용구 배열의 인덱스여야 한다.\\n--- 인용구 목록 ---\\n0. [찰스 디킨스 / 두 도시 이야기] 그것은 최고의 시대였고, 그것은 최악의 시대였다. (tags: 밝음, 양가감정, 희망, 덧없음)\\n1. [레오 톨스토이 / 안나 카레니나] 행복한 가정은 모두 비슷하지만, 불행한 가정은 저마다 다르다. (tags: 평온, 행복, 가정, 안정, 성찰)\\n2. [F. 스콧 피츠제럴드 / 위대한 개츠비] 우리는 계속 앞으로 나아간다, 거대한 강물의 흐름을 거슬러, 끝내는 과거로 떠밀려가면서. (tags: 향수, 체념, 피로, 월요일, 시간)\\n3. [어니스트 헤밍웨이 / 노인과 바다] 인간은 패배하도록 만들어지지 않았다. 인간은 파괴될 수는 있어도, 패배하지는 않는다. (tags: 투지, 의지, 도전, 역경, 끈기)\\n4. [가브리엘 가르시아 마르케스 / 백년 동안의 고독] 많은 해 뒤에, 총살 부대 앞에 서서, 아우렐리아노 부엔디아 대령은 아버지에게 얼음을 보여주었던 저 먼 오후를 떠올리게 될 것이다. (tags: 향수, 기억, 따스함, 쓸쓸함)\\n--- 입력 문장 ---\\n어제가 그리워\\n--- 출력 형식(JSON) ---\\n{ \\\"input\\\": \\\"<원문 그대로>\\\", \\\"chosenIndex\\\": <number>, \\\"reason\\\": \\\"<간단한 이유>\\\" }\"}]}],\"config\":{},\"tools\":[],\"output\":{}}}","genkit:state":"success"},"displayName":"generate","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"4a30f322ae943e26":{"spanId":"4a30f322ae943e26","traceId":"3e34d3b53c3df7595a76dcb07ba51e3b","startTime":1755766756266,"endTime":1755766768132.7249,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"flow","genkit:name":"quoteMatchFlow","genkit:isRoot":true,"genkit:path":"/{quoteMatchFlow,t:flow}","genkit:metadata:context":"{}","genkit:input":"\"어제가 그리워\"","genkit:state":"error","genkit:isFailureSource":true},"displayName":"quoteMatchFlow","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"text is not a function"},"timeEvents":{"timeEvent":[{"time":1755766768132.6875,"annotation":{"attributes":{"exception.type":"TypeError","exception.message":"text is not a function","exception.stacktrace":"TypeError: text is not a function\n    at <anonymous> (/Users/kimhyunjoong/Documents/genkit-demo/src/index.ts:106:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/kimhyunjoong/Documents/genkit-demo/node_modules/@genkit-ai/core/src/flow.ts:119:14)\n    at async <anonymous> (/Users/kimhyunjoong/Documents/genkit-demo/node_modules/@genkit-ai/core/src/action.ts:531:14)\n    at async <anonymous> (/Users/kimhyunjoong/Documents/genkit-demo/node_modules/@genkit-ai/core/src/action.ts:404:30)\n    at async <anonymous> (/Users/kimhyunjoong/Documents/genkit-demo/node_modules/@genkit-ai/core/src/tracing/instrumentation.ts:73:16)\n    at async <anonymous> (/Users/kimhyunjoong/Documents/genkit-demo/node_modules/@genkit-ai/core/src/tracing/instrumentation.ts:115:24)\n    at async runInNewSpan (/Users/kimhyunjoong/Documents/genkit-demo/node_modules/@genkit-ai/core/src/tracing/instrumentation.ts:103:10)\n    at async newTrace (/Users/kimhyunjoong/Documents/genkit-demo/node_modules/@genkit-ai/core/src/tracing/instrumentation.ts:62:10)\n    at async AsyncFunction.actionFn.run (/Users/kimhyunjoong/Documents/genkit-demo/node_modules/@genkit-ai/core/src/action.ts:357:22)"},"description":"exception"}}]}}},"displayName":"quoteMatchFlow","startTime":1755766756266,"endTime":1755766768132.7249}